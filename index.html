<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SayWord: Knockout</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: white; }
    .card {
      width: 200px; height: 300px;
      border: 4px solid navy;
      margin: 20px auto;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      position: relative;
    }
    .points {
      position: absolute;
      bottom: 5px; left: 5px;
      width: 30px; height: 30px;
      background: orange; color: white;
      font-size: 12px; display: flex;
      align-items: center; justify-content: center;
    }
  </style>
</head>
<body>
  <h1>SayWord: Knockout</h1>
  <div id="progress">‚úÖ Words: 0 | ‚ùå Strikes: 0</div>

  <div class="card" id="morpheme-card">
    <div id="morpheme-text">bio</div>
    <div id="morpheme-meaning"><i>life</i></div>
    <div class="points" id="morpheme-points">1</div>
  </div>

  <div>
    <input id="word-input" type="text" placeholder="Enter a word"/>
    <button onclick="submitWord()">Submit</button>
  </div>

  <p>‚è≥ Round Time: <span id="round-timer">300</span> sec</p>
  <p>üïí Word Timer: <span id="word-timer">20</span> sec</p>

  <button onclick="resetGame()">Restart</button>

  <script>
    const morphemes = [
      { morpheme: "bio", meaning: "life", points: 1 },
      { morpheme: "geo", meaning: "earth", points: 1 },
      { morpheme: "aqua", meaning: "water", points: 2 },
      { morpheme: "tele", meaning: "far", points: 2 }
      // ‚Ä¶ expand to 80
    ];

    let current, words = 0, strikes = 0;
    let roundTime = 300, wordTime = 20;
    let roundInterval, wordInterval;

    function pickMorpheme() {
      current = morphemes[Math.floor(Math.random() * morphemes.length)];
      document.getElementById("morpheme-text").textContent = current.morpheme;
      document.getElementById("morpheme-meaning").textContent = current.meaning;
      document.getElementById("morpheme-points").textContent = current.points;
    }

    function updateProgress() {
      document.getElementById("progress").textContent =
        `‚úÖ Words: ${words} | ‚ùå Strikes: ${"X".repeat(strikes)}`;
    }

    function submitWord() {
      const input = document.getElementById("word-input").value.toLowerCase();
      if (input.includes(current.morpheme)) {
        words++;
        if (words >= 20) { endGame("You win!"); return; }
      } else {
        strikes++;
        if (strikes >= 3) { endGame("You lose!"); return; }
      }
      document.getElementById("word-input").value = "";
      pickMorpheme();
      wordTime = 20;
    }

    function startTimers() {
      roundInterval = setInterval(() => {
        roundTime--;
        document.getElementById("round-timer").textContent = roundTime;
        if (roundTime <= 0) endGame("Time‚Äôs up! You lose!");
      }, 1000);

      wordInterval = setInterval(() => {
        wordTime--;
        document.getElementById("word-timer").textContent = wordTime;
        if (wordTime <= 0) {
          strikes++;
          updateProgress();
          if (strikes >= 3) endGame("Too many strikes!");
          else { pickMorpheme(); wordTime = 20; }
        }
      }, 1000);
    }

    function endGame(msg) {
      clearInterval(roundInterval);
      clearInterval(wordInterval);
      alert(msg);
    }

    function resetGame() {
      words = 0; strikes = 0;
      roundTime = 300; wordTime = 20;
      updateProgress();
      pickMorpheme();
      clearInterval(roundInterval);
      clearInterval(wordInterval);
      startTimers();
    }

    // start game
    resetGame();
  </script>
</body>
</html>
