<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SayWord Knockout</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: white;
      margin: 0;
      padding: 0;
    }

    h1 {
      color: navy;
    }

    #roundTimerContainer {
      width: 80%;
      height: 25px;
      background-color: #eee;
      margin: 20px auto;
      border: 2px solid navy;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    #roundTimerBar {
      height: 100%;
      width: 100%;
      background-color: orange;
      transition: width 1s linear;
    }

    #roundTimerText {
      position: absolute;
      width: 100%;
      top: 0;
      left: 0;
      line-height: 25px;
      font-size: 14px;
      font-weight: bold;
      color: navy;
    }

    #game {
      margin-top: 20px;
    }

    .card {
      display: inline-block;
      width: 120px;
      height: 180px;
      margin: 10px;
      background-color: orange;
      color: navy;
      border: 8px solid navy;   /* thicker navy border */
      border-radius: 12px;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.3);
      position: relative;
      font-size: 24px;
      font-weight: bold;
      line-height: 180px;
    }

    .point-square {
      position: absolute;
      bottom: 6px;
      left: 6px;
      width: 30px;
      height: 30px;
      background: navy;
      color: white;
      font-size: 10px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
    }

    #turnTimer {
      font-size: 24px;
      color: navy;
      margin: 15px 0;
    }

    #score {
      font-size: 20px;
      color: navy;
      margin: 10px 0;
    }

    #wordInput {
      padding: 10px;
      font-size: 16px;
      width: 250px;
    }

    #submitWord {
      padding: 10px 20px;
      font-size: 16px;
      margin-left: 10px;
      background-color: navy;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #submitWord:hover {
      background-color: orange;
      color: navy;
    }

    #message {
      margin-top: 15px;
      font-size: 18px;
      font-weight: bold;
      color: red;
    }
  </style>
</head>
<body>
  <h1>SayWord Knockout</h1>

  <!-- Round Timer (5 min with progress bar) -->
  <div id="roundTimerContainer">
    <div id="roundTimerBar"></div>
    <div id="roundTimerText">5:00</div>
  </div>

  <!-- Turn Timer (20 sec) -->
  <div id="turnTimer">Turn Time: 20</div>
  <div id="score">Score: 0</div>
  <div id="game"></div>

  <input id="wordInput" type="text" placeholder="Enter your word" />
  <button id="submitWord">Submit</button>
  <div id="message"></div>

  <script>
    // Build morpheme list: 40 (7th grade = 1 pt), 40 (8th grade = 2 pts)
    const morphemes = [];
    const grade7 = [
      "bio","graph","tele","photo","micro","auto","meter","port",
      "dict","scrib","sect","vis","vid","phon","geo","aqua",
      "struct","form","therm","cycle","cred","rupt","spect","ject",
      "manu","chron","astro","bene","mal","ped","mit","cap",
      "anti","multi","sub","trans","tri","uni","re","pre"
    ];
    grade7.forEach(m => morphemes.push({ text: m, points: 1 }));

    const grade8 = [
      "inter","intra","poly","circum","hyper","hypo","semi","syn",
      "teleo","neo","omni","post","super","ultra","ambi","contra",
      "cide","dorm","homo","hetero","phobia","phile","logue","path",
      "morph","chronos","cracy","dem","gen","ism","ist","logy",
      "onym","phil","polis","scope","soph","troph","videre","voc"
    ];
    grade8.forEach(m => morphemes.push({ text: m, points: 2 }));

    // Shuffle morphemes
    let availableMorphemes = [...morphemes];
    let usedWords = new Set();
    let score = 0;

    // Round timer: 5 min = 300s
    let roundTimeLeft = 300;
    const roundTimerBar = document.getElementById("roundTimerBar");
    const roundTimerText = document.getElementById("roundTimerText");
    setInterval(() => {
      roundTimeLeft--;
      const minutes = Math.floor(roundTimeLeft / 60);
      const seconds = roundTimeLeft % 60;
      roundTimerText.innerText = `${minutes}:${seconds.toString().padStart(2,"0")}`;
      roundTimerBar.style.width = (roundTimeLeft / 300 * 100) + "%";
      if (roundTimeLeft <= 0) {
        document.getElementById("message").innerText = "You lose! Time expired.";
      }
    }, 1000);

    // Turn timer: 20s
    let turnTimeLeft = 20;
    let turnInterval;
    const turnTimerDiv = document.getElementById("turnTimer");

    function startTurnTimer() {
      clearInterval(turnInterval);
      turnTimeLeft = 20;
      turnTimerDiv.innerText = "Turn Time: 20";
      turnInterval = setInterval(() => {
        turnTimeLeft--;
        turnTimerDiv.innerText = "Turn Time: " + turnTimeLeft;
        if (turnTimeLeft <= 0) {
          clearInterval(turnInterval);
          document.getElementById("message").innerText = "Out of time! Next card.";
          nextCard();
        }
      }, 1000);
    }

    // Display one card
    function displayCard(morpheme) {
      const gameDiv = document.getElementById("game");
      gameDiv.innerHTML = "";
      const card = document.createElement("div");
      card.className = "card";
      card.innerText = morpheme.text;

      const square = document.createElement("div");
      square.className = "point-square";
      square.innerText = morpheme.points;
      card.appendChild(square);

      gameDiv.appendChild(card);
    }

    function nextCard() {
      if (availableMorphemes.length === 0) {
        document.getElementById("message").innerText = "No more morphemes!";
        return;
      }
      const morpheme = availableMorphemes.shift();
      displayCard(morpheme);
      startTurnTimer();
      currentMorpheme = morpheme;
    }

    let currentMorpheme = null;

    function submitWord() {
      const wordInput = document.getElementById("wordInput");
      const word = wordInput.value.trim().toLowerCase();
      const message = document.getElementById("message");

      if (!word) {
        message.innerText = "Please enter a word.";
        return;
      }

      if (usedWords.has(word)) {
        message.innerText = "That word was already used!";
        wordInput.value = "";
        return;
      }

      if (word.includes(currentMorpheme.text)) {
        usedWords.add(word);
        score += currentMorpheme.points;
        document.getElementById("score").innerText = "Score: " + score;
        message.innerText = "Correct! +" + currentMorpheme.points + " point(s).";
        nextCard();
      } else {
        message.innerText = "Invalid word!";
      }

      wordInput.value = "";
    }

    document.getElementById("submitWord").addEventListener("click", submitWord);

    // Start game with first card
    nextCard();
  </script>
</body>
</html>

