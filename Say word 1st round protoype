<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SayWord Knockout</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background:#fff;
      text-align:center;
      padding:20px;
      color:#333;
    }

    h1 { color:#008080; }

    /* Round timer progress bar */
    #round-timer {
      width: 100%;
      height: 30px;
      background: #ddd;
      margin-bottom: 20px;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }
    #round-progress {
      height: 100%;
      width: 100%;
      background: #008080;
      color: white;
      text-align: center;
      line-height: 30px;
      transition: width 1s linear;
    }

    /* 20-second circular timer */
    #turn-timer {
      width:120px;
      height:120px;
      border-radius:50%;
      border:10px solid #008080;
      margin: 20px auto;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
      font-weight:bold;
      color:#008080;
    }

    /* Morpheme card */
    #morpheme-card {
      font-size:28px;
      font-weight:bold;
      margin:20px 0;
      padding:10px 20px;
      border:2px solid #008080;
      border-radius:10px;
      display:inline-block;
      color:#008080;
    }

    input {
      padding:10px;
      font-size:16px;
      width:200px;
    }
    button {
      padding:10px 15px;
      margin-left:10px;
      background:#008080;
      color:white;
      border:none;
      cursor:pointer;
      font-size:16px;
      border-radius:5px;
    }

    #status { margin-top:15px; font-weight:bold; }
  </style>
</head>
<body>

  <h1>SayWord Knockout</h1>

  <!-- 5 min round timer -->
  <div id="round-timer">
    <div id="round-progress">5:00</div>
  </div>

  <!-- 20 sec circular timer -->
  <div id="turn-timer">20</div>

  <!-- Morpheme card -->
  <div id="morpheme-card">---</div>

  <!-- Word input -->
  <input type="text" id="word-input" placeholder="Enter word" />
  <button onclick="submitWord()">Submit</button>

  <p id="status"></p>
  <p>Words Submitted: <span id="score">0</span> / 20</p>
  <p>Strikes: <span id="strikes">0</span> / 3</p>

  <script>
    // Game state
    let roundTime = 300; // 5 min = 300 sec
    let turnTime = 20;   // 20 sec per word
    let roundTimer, turnTimer;
    let wordsSubmitted = 0;
    let strikes = 0;

    // 80 morphemes list
    const morphemes = [
      "pre","re","un","in","im","dis","mis","sub","inter","trans","super","over","under","anti","non","post","pro","semi","tri","bi","mono","multi","ex","co","com","con","de","en","em",
      "able","ible","al","ance","ence","er","or","ment","ness","ful","less","tion","sion","ous","ious","ic","ish","ive","ity","ty","ly","ship","ward","wards","ed","ing","est","y","en","dom","ant","ent","ology",
      "aqua","aud","bene","bio","chrono","cred","dict","geo","graph","gram","junct","man","manu","mater","matr","meter","metr","min","mit","miss","mort","phon","photo","port","rupt","scrib","script","spect","struct","tele","terra","therm","vid","vis","voc","voke","zo","zoo"
    ];
    let currentMorpheme = "";

    // Start game
    startRound();

    function startRound() {
      // Round countdown
      roundTimer = setInterval(() => {
        roundTime--;
        updateRoundTimer();
        if (roundTime <= 0) endGame(false, "‚è∞ Time is up!");
      }, 1000);

      // First turn
      nextTurn();
    }

    function updateRoundTimer() {
      let minutes = Math.floor(roundTime / 60);
      let seconds = roundTime % 60;
      let display = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      let percent = (roundTime / 300) * 100;
      let bar = document.getElementById("round-progress");
      bar.style.width = percent + "%";
      bar.textContent = display;
    }

    function nextTurn() {
      // Pick morpheme
      currentMorpheme = morphemes[Math.floor(Math.random() * morphemes.length)];
      document.getElementById("morpheme-card").textContent = currentMorpheme;

      // Reset 20 sec timer
      turnTime = 20;
      updateTurnTimer();
      if (turnTimer) clearInterval(turnTimer);
      turnTimer = setInterval(() => {
        turnTime--;
        updateTurnTimer();
        if (turnTime <= 0) {
          clearInterval(turnTimer);
          addStrike("‚è≥ No word submitted in time!");
        }
      }, 1000);
    }

    function updateTurnTimer() {
      document.getElementById("turn-timer").textContent = turnTime;
    }

    function submitWord() {
      let word = document.getElementById("word-input").value.trim().toLowerCase();
      document.getElementById("word-input").value = "";

      if (word && word.includes(currentMorpheme)) {
        wordsSubmitted++;
        document.getElementById("score").textContent = wordsSubmitted;
        document.getElementById("status").textContent = `‚úÖ "${word}" accepted!`;
        if (wordsSubmitted >= 20) endGame(true, "üèÜ You win! 20 words submitted.");
        else nextTurn();
      } else {
        addStrike(`‚ùå "${word}" is invalid! Must contain: ${currentMorpheme}`);
      }
    }

    function addStrike(message) {
      strikes++;
      document.getElementById("strikes").textContent = strikes;
      document.getElementById("status").textContent = message;
      if (strikes >= 3) endGame(false, "‚ùå 3 strikes! You lose.");
      else nextTurn();
    }

    function endGame(win, message) {
      clearInterval(roundTimer);
      clearInterval(turnTimer);
      document.getElementById("status").textContent = message;
    }
  </script>
</body>
</html>
